//array-base de datos de videojuegos (provisional)
const videojuegos = [
  {
    id: "suiko1",
    versiones: [
      {
        nombre: "Genso Suikoden",
        imagen: "image/videojuegos/suiko1.webp",
        fechaSalida: "15/12/1995",
        disponibilidad: "No disponible",
        consola: "PlayStation",
        descripcion: "El juego nos pone en la piel de Tir Mc Dohl, hijo del General Teo Mc Dohl del Imperio de la Luna Escarlata. Tir se alista en el ejército siguiendo los pasos de su padre, pero pronto descubrirá que el Imperio esta corrupto y que el pueblo sufre. De modo que se unirá al Ejército de Liberación, el cual acabara dirigiendo, y luchará contra Barbarossa y Windy una malvada hechicera.",
      },
      {
        nombre: "Genso Suikoden I & II",
        imagen: "image/videojuegos/suiko12psp.jpg",
        fechaSalida: "23/02/2006",
        disponibilidad: "No disponible",
        consola: "PlayStation Portable",
        descripcion: "Conjunto de Suikoden I & II para consola.",
      },
      {
        nombre: "Genso Suikoden I & II: Gate Rune & Dunan Unification War - HD Remaster ",
        imagen: "image/videojuegos/suiko12switch.jpg",
        fechaSalida: "06/03/2025",
        disponibilidad: "No disponible",
        consola: "Nintendo Switch",
        descripcion: "Remake HD de Suikoden I & II en una colección para consolas modernas.",
      },
      {
        nombre: "Genso Suikoden I & II: Gate Rune & Dunan Unification War - HD Remaster ",
        imagen: "image/videojuegos/suiko12ps4.jpg",
        fechaSalida: "06/03/2025",
        disponibilidad: "No disponible",
        consola: "Playstation 4",
        descripcion: "Remake HD de Suikoden I & II en una colección para consolas modernas.",
      },
      {
        nombre: "Genso Suikoden I & II: Gate Rune & Dunan Unification War - HD Remaster ",
        imagen: "image/videojuegos/suiko12ps5.jpg",
        fechaSalida: "06/03/2025",
        disponibilidad: "No disponible",
        consola: "Playstation 5",
        descripcion: "Remake HD de Suikoden I & II en una colección para consolas modernas.",
      },
      {
        nombre: "Genso Suikoden I & II: Gate Rune & Dunan Unification War - HD Remaster ",
        imagen: "image/videojuegos/suiko12xbox.jpg",
        fechaSalida: "06/03/2025",
        disponibilidad: "No disponible",
        consola: "XBOX Series X",
        descripcion: "Remake HD de Suikoden I & II en una colección para consolas modernas.",
      }
    ]
  },
  {
    id: "suiko2",
    versiones: [
      {
        nombre: "Genso Suikoden 2",
        imagen: "image/videojuegos/suiko2.webp",
        fechaSalida: "17/12/1998",
        disponibilidad: "No disponible",
        consola: "PlayStation",
        descripcion: "El protagonista es Riou, un joven de la Brigada Unicornio de Highland. Jowston y Highland, enemigos ancestrales, disfrutan de una momentánea tregua, pero pronto la paz será truncada cuando la Brigada Unicornio es masacrada y solo Riou, y su amigo Jowy, logran escapar con vida. Riou descubrirá que algo oscuro se oculta tras el ataque y los eventos que se producirán después acabaran llevándolo a dirigir el ejército de Jowston contra su tierra natal, Highland."
      },
      {
        nombre: "Genso Suikoden I & II",
        imagen: "image/videojuegos/suiko12psp.jpg",
        fechaSalida: "23/02/2006",
        disponibilidad: "No disponible",
        consola: "PlayStation Portable",
        descripcion: "Conjunto de Suikoden I & II para consola.",
      },
      {
        nombre: "Genso Suikoden I & II: Gate Rune & Dunan Unification War - HD Remaster ",
        imagen: "image/videojuegos/suiko12switch.jpg",
        fechaSalida: "06/03/2025",
        disponibilidad: "No disponible",
        consola: "Nintendo Switch",
        descripcion: "Remake HD de Suikoden I & II en una colección para consolas modernas.",
      },
      {
        nombre: "Genso Suikoden I & II: Gate Rune & Dunan Unification War - HD Remaster ",
        imagen: "image/videojuegos/suiko12ps4.jpg",
        fechaSalida: "06/03/2025",
        disponibilidad: "No disponible",
        consola: "Playstation 4",
        descripcion: "Remake HD de Suikoden I & II en una colección para consolas modernas.",
      },
      {
        nombre: "Genso Suikoden I & II: Gate Rune & Dunan Unification War - HD Remaster ",
        imagen: "image/videojuegos/suiko12ps5.jpg",
        fechaSalida: "06/03/2025",
        disponibilidad: "No disponible",
        consola: "Playstation 5",
        descripcion: "Remake HD de Suikoden I & II en una colección para consolas modernas.",
      },
      {
        nombre: "Genso Suikoden I & II: Gate Rune & Dunan Unification War - HD Remaster ",
        imagen: "image/videojuegos/suiko12xbox.jpg",
        fechaSalida: "06/03/2025",
        disponibilidad: "No disponible",
        consola: "XBOX Series X",
        descripcion: "Remake HD de Suikoden I & II en una colección para consolas modernas.",
      }
    ]
    
  },
  {
    id: "suiko3",
    versiones: [
      {
        nombre: "Genso Suikoden 3",
        imagen: "image/videojuegos/suiko3.jpg",
        fechaSalida: "11/07/2002",
        disponibilidad: "No disponible",
        consola: "PlayStation 2",
        descripcion: "Zexen y las 6 tribus que habitan en Grasslands están en constante conflicto, la guerra no tardará en estallar. El Sagrado Reino de Harmonia aprovechará la situación para intentar conquistar Grasslands. Además una oscura sombra amenaza con un mal todavía mayor. Los héroes en esta ocasión son 4: Thomas un joven que es asignado como señor de un castillo en Grasslands, Hugo hijo de la jefa de uno de los seis clanes, Geddoe un mercenario de Harmonia y Chris comandante del ejército de Zexen."
      }
    ]
    
  },
  {
    id: "suiko4",
    versiones: [
      {
        nombre: "Genso Suikoden 4",
        imagen: "image/videojuegos/suiko4.webp",
        fechaSalida: "19/08/2004",
        disponibilidad: "No disponible",
        consola: "PlayStation 2",
        descripcion: "El héroe es Lazlo un joven recluta de los Caballeros de Gaien, pero se verá envuelto incidente con la Runa del Castigo que le acabara conduciendo al destierro. Al mismo tiempo el Imperio Kooluk, intenta expandirse hacia el sur conquistando las Naciones Insulares, el curso de los acontecimientos llevara a Lazlo a dirigir el ejército de las islas para intentar repeler el ataque del Imperio que se ha aliado con la compañía de comercio del misterioso Graham Cray."
      }
    ]
  },
  {
    id: "suiko5",
    versiones: [
      {
        nombre: "Genso Suikoden 5",
        imagen: "image/videojuegos/suiko5.webp",
        fechaSalida: "23/02/2006",
        disponibilidad: "No disponible",
        consola: "PlayStation 2",
        descripcion: "Encarnaremos al Príncipe Faroush Von Falenas. En Falena solo las mujeres pueden reinar por lo que la heredera del trono es la princesa Lymsleia Von Falenas, hermana del Príncipe. Pero debido a las confabulaciones de una de las facciones del senado el Príncipe Faroush se verá separado de su hermana pequeña. Para rescatar a Lymsleia y deponer a la facción (ahora en el poder) que oprime al pueblo el Príncipe, siempre acompañado por su fiel guardaespaldas Lyon, organizara un ejército rebelde y luchará por Falena."
      }
    ] 
  }
];

const modal = document.getElementById("modal");
const modalContenido = document.getElementById("modal-contenido");
const cerrar = document.querySelector(".cerrar");

  // Función para crear el HTML del modal según el videojuego y sus versiones
function mostrarInfoVideojuego(id) {
    const videojuego = videojuegos.find(v => v.id === id);
    if (!videojuego) return;

    let versionActual = 0;
    const versiones = videojuego.versiones;

    function renderModal(){
      const v = versiones[versionActual];
      let controles = "";

      if (versiones.length > 1){
        controles = `
          <div class="controles-version">
            <button id="anterior" ${versionActual === 0 ? "disabled" : ""}>←</button>
            <span>${versionActual + 1} / ${versiones.length}</span>
            <button id="siguiente" ${versionActual === versiones.length - 1 ? "disabled" : ""}>→</button>
          </div>
    `;
      }

      modalContenido.innerHTML = `
        <span class="cerrar">&times;</span>
        <img src="${v.imagen}" alt="${v.nombre}" class="modal-img">
        <h2>${v.nombre}</h2>
        <p><strong>Fecha de salida:</strong> ${v.fechaSalida}</p>
        <p><strong>Disponibilidad:</strong> ${v.disponibilidad}</p>
        <p><strong>Consola:</strong> ${v.consola}</p>
        <p class="descripcion"> ${v.descripcion}</p>
        ${controles}
    `;

   // Vuelvo a asignar el evento al nuevo botón cerrar (porque reescribí el contenido)
      const nuevaCerrar = modalContenido.querySelector(".cerrar");
      nuevaCerrar.addEventListener("click", () => {
        modal.style.display = "none";
      });

      modal.style.display = "flex";

  //Asignar evento click a las flechas de las versiones

  if (versiones.length > 1) {
      const anterior = document.getElementById("anterior");
      const siguiente = document.getElementById("siguiente");

      anterior.addEventListener("click", () => {
        if (versionActual > 0) {
          versionActual--;
          renderModal();
        }
      });

      siguiente.addEventListener("click", () => {
        if (versionActual < versiones.length - 1) {
          versionActual++;
          renderModal();
        }
      });
    }
  }
  renderModal();
}

  // Asignar evento click a cada tarjeta con id igual al id del array
videojuegos.forEach(videojuego => {
    const tarjeta = document.getElementById(videojuego.id);
    if (tarjeta) {
      tarjeta.addEventListener("click", () => {
        mostrarInfoVideojuego(videojuego.id);
      });
    }
});

  // Cerrar modal al hacer clic fuera del contenido
window.addEventListener("click", (e) => {
    if (e.target === modal) {
      modal.style.display = "none";
    }
});